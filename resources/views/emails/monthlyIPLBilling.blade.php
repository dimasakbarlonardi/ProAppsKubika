<!DOCTYPE html>
<html lang="en" style="box-sizing: border-box; --bs-blue: #0d6efd; --bs-indigo: #6610f2; --bs-purple: #6f42c1; --bs-pink: #d63384; --bs-red: #dc3545; --bs-orange: #fd7e14; --bs-yellow: #ffc107; --bs-green: #198754; --bs-teal: #20c997; --bs-cyan: #0dcaf0; --bs-black: #000; --bs-white: #fff; --bs-gray: #6c757d; --bs-gray-dark: #343a40; --bs-gray-100: #f8f9fa; --bs-gray-200: #e9ecef; --bs-gray-300: #dee2e6; --bs-gray-400: #ced4da; --bs-gray-500: #adb5bd; --bs-gray-600: #6c757d; --bs-gray-700: #495057; --bs-gray-800: #343a40; --bs-gray-900: #212529; --bs-primary: #0d6efd; --bs-secondary: #6c757d; --bs-success: #198754; --bs-info: #0dcaf0; --bs-warning: #ffc107; --bs-danger: #dc3545; --bs-light: #f8f9fa; --bs-dark: #212529; --bs-primary-rgb: 13, 110, 253; --bs-secondary-rgb: 108, 117, 125; --bs-success-rgb: 25, 135, 84; --bs-info-rgb: 13, 202, 240; --bs-warning-rgb: 255, 193, 7; --bs-danger-rgb: 220, 53, 69; --bs-light-rgb: 248, 249, 250; --bs-dark-rgb: 33, 37, 41; --bs-primary-text-emphasis: #052c65; --bs-secondary-text-emphasis: #2b2f32; --bs-success-text-emphasis: #0a3622; --bs-info-text-emphasis: #055160; --bs-warning-text-emphasis: #664d03; --bs-danger-text-emphasis: #58151c; --bs-light-text-emphasis: #495057; --bs-dark-text-emphasis: #495057; --bs-primary-bg-subtle: #cfe2ff; --bs-secondary-bg-subtle: #e2e3e5; --bs-success-bg-subtle: #CDF6E4; --bs-info-bg-subtle: #cff4fc; --bs-warning-bg-subtle: #fff3cd; --bs-danger-bg-subtle: #f8d7da; --bs-light-bg-subtle: #fcfcfd; --bs-dark-bg-subtle: #ced4da; --bs-primary-border-subtle: #9ec5fe; --bs-secondary-border-subtle: #c4c8cb; --bs-success-border-subtle: #a3cfbb; --bs-info-border-subtle: #9eeaf9; --bs-warning-border-subtle: #ffe69c; --bs-danger-border-subtle: #f1aeb5; --bs-light-border-subtle: #e9ecef; --bs-dark-border-subtle: #adb5bd; --bs-white-rgb: 255, 255, 255; --bs-black-rgb: 0, 0, 0; --bs-font-sans-serif: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', 'Noto Sans', 'Liberation Sans', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; --bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0)); --bs-body-font-family: var(--bs-font-sans-serif); --bs-body-font-size: 1rem; --bs-body-font-weight: 400; --bs-body-line-height: 1.5; --bs-body-color: #212529; --bs-body-color-rgb: 33, 37, 41; --bs-body-bg: #fff; --bs-body-bg-rgb: 255, 255, 255; --bs-emphasis-color: #000; --bs-emphasis-color-rgb: 0, 0, 0; --bs-secondary-color: rgba(33, 37, 41, 0.75); --bs-secondary-color-rgb: 33, 37, 41; --bs-secondary-bg: #e9ecef; --bs-secondary-bg-rgb: 233, 236, 239; --bs-tertiary-color: rgba(33, 37, 41, 0.5); --bs-tertiary-color-rgb: 33, 37, 41; --bs-tertiary-bg: #f8f9fa; --bs-tertiary-bg-rgb: 248, 249, 250; --bs-heading-color: inherit; --bs-link-color: #0d6efd; --bs-link-color-rgb: 13, 110, 253; --bs-link-decoration: underline; --bs-link-hover-color: #0a58ca; --bs-link-hover-color-rgb: 10, 88, 202; --bs-code-color: #d63384; --bs-highlight-color: #212529; --bs-highlight-bg: #fff3cd; --bs-border-width: 1px; --bs-border-style: solid; --bs-border-color: #dee2e6; --bs-border-color-translucent: rgba(0, 0, 0, 0.175); --bs-border-radius: 0.375rem; --bs-border-radius-sm: 0.25rem; --bs-border-radius-lg: 0.5rem; --bs-border-radius-xl: 1rem; --bs-border-radius-xxl: 2rem; --bs-border-radius-2xl: var(--bs-border-radius-xxl); --bs-border-radius-pill: 50rem; --bs-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15); --bs-box-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); --bs-box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175); --bs-box-shadow-inset: inset 0 1px 2px rgba(0, 0, 0, 0.075); --bs-focus-ring-width: 0.25rem; --bs-focus-ring-opacity: 0.25; --bs-focus-ring-color: rgba(13, 110, 253, 0.25); --bs-form-valid-color: #198754; --bs-form-valid-border-color: #198754; --bs-form-invalid-color: #dc3545; --bs-form-invalid-border-color: #dc3545; --bs-breakpoint-xs: 0; --bs-breakpoint-sm: 576px; --bs-breakpoint-md: 768px; --bs-breakpoint-lg: 992px; --bs-breakpoint-xl: 1200px; --bs-breakpoint-xxl: 1400px;">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="">
    <title>Pro Apps | Dashboard &amp; Web App Template</title>
    <style>
        @media (prefers-reduced-motion:no-preference) {
            :root {
                scroll-behavior: smooth;
            }
        }

        @media (min-width:1200px) {
            h2 {
                font-size: 2rem;
            }
        }

        @media (min-width:576px) {
            .container {
                max-width: 540px;
            }
        }

        @media (min-width:768px) {
            .container {
                max-width: 720px;
            }
        }

        @media (min-width:992px) {
            .container {
                max-width: 960px;
            }
        }

        @media (min-width:1200px) {
            .container {
                max-width: 1140px;
            }
        }

        @media (min-width:1400px) {
            .container {
                max-width: 1320px;
            }
        }

        @media (min-width:576px) {
            .col-sm-auto {
                flex: 0 0 auto;
                width: auto;
            }

            .col-sm-6 {
                flex: 0 0 auto;
                width: 50%;
            }
        }

        @media (min-width:768px) {
            .col-md {
                flex: 1 0 0%;
            }
        }

        @media (prefers-reduced-motion:reduce) {
            .form-control::file-selector-button {
                transition: none;
            }
        }

        @media (prefers-reduced-motion:reduce) {
            .btn {
                transition: none;
            }
        }

        @media (min-width:576px) {
            .text-sm-end {
                text-align: right !important;
            }
        }
    </style>
</head>

<body style="box-sizing: border-box; margin: 0; font-family: var(--bs-body-font-family); font-size: var(--bs-body-font-size); font-weight: var(--bs-body-font-weight); line-height: var(--bs-body-line-height); color: var(--bs-body-color); text-align: var(--bs-body-text-align); background-color: var(--bs-body-bg); -webkit-text-size-adjust: 100%; -webkit-tap-highlight-color: transparent;">
    <div class="container bg-white rounded" id="splitPaymentData" style="box-sizing: border-box; --bs-gutter-x: 1.5rem; --bs-gutter-y: 0; width: 100%; padding-right: calc(var(--bs-gutter-x) * .5); padding-left: calc(var(--bs-gutter-x) * .5); margin-right: auto; margin-left: auto; --bs-bg-opacity: 1; background-color: rgba(var(--bs-white-rgb), var(--bs-bg-opacity)); border-radius: var(--bs-border-radius);">
        <div class="card mb-3 mt-3" style="box-sizing: border-box; --bs-card-spacer-y: 1rem; --bs-card-spacer-x: 1rem; --bs-card-title-spacer-y: 0.5rem; --bs-card-border-width: var(--bs-border-width); --bs-card-border-color: var(--bs-border-color-translucent); --bs-card-border-radius: var(--bs-border-radius); --bs-card-inner-border-radius: calc(var(--bs-border-radius) - (var(--bs-border-width))); --bs-card-cap-padding-y: 0.5rem; --bs-card-cap-padding-x: 1rem; --bs-card-cap-bg: rgba(var(--bs-body-color-rgb), 0.03); --bs-card-bg: var(--bs-body-bg); --bs-card-img-overlay-padding: 1rem; --bs-card-group-margin: 0.75rem; position: relative; display: flex; flex-direction: column; min-width: 0; height: var(--bs-card-height); color: var(--bs-body-color); word-wrap: break-word; background-color: var(--bs-card-bg); background-clip: border-box; border: var(--bs-card-border-width) solid var(--bs-card-border-color); border-radius: var(--bs-card-border-radius); margin-top: 1rem; margin-bottom: 1rem;">
            <div class="card-body" style="box-sizing: border-box; flex: 1 1 auto; padding: var(--bs-card-spacer-y) var(--bs-card-spacer-x); color: var(--bs-card-color);">
                <div class="row justify-content-between align-items-center" style="box-sizing: border-box; --bs-gutter-x: 1.5rem; --bs-gutter-y: 0; display: flex; flex-wrap: wrap; margin-top: calc(-1 * var(--bs-gutter-y)); margin-right: calc(-.5 * var(--bs-gutter-x)); margin-left: calc(-.5 * var(--bs-gutter-x));">
                    <div class="col-md" style="box-sizing: border-box; flex-shrink: 0; width: 100%; max-width: 100%; padding-right: calc(var(--bs-gutter-x) * .5); padding-left: calc(var(--bs-gutter-x) * .5); margin-top: var(--bs-gutter-y);">
                        <h5 class="mb-2 mb-md-0" style="box-sizing: border-box; margin-top: 0; font-weight: 500; line-height: 1.2; color: var(--bs-heading-color); font-size: 1.25rem; margin-bottom: .5rem;">
                            Invoice #<span id="no-invoice" style="box-sizing: border-box;">{{ $transaction->IPLCashReceipt->no_invoice }}</span>
                        </h5>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex">
            <div style="box-sizing: border-box; flex-shrink: 0; width: 100%; max-width: 100%; padding-right: calc(var(--bs-gutter-x) * .5); padding-left: calc(var(--bs-gutter-x) * .5); margin-top: var(--bs-gutter-y); flex: 1 0 0%;">
                <div>
                    <img src="https://dev.pro-apps.xyz{{ $setting->company_logo ? $setting->company_logo : '/assets/img/icons/spot-illustrations/proapps.png' }}" alt="invoice" width="150" />
                </div>
            </div>
            <div>
                <div>
                    <h2>
                        Invoice</h2>
                    <h5 style="box-sizing: border-box; margin-top: 0; margin-bottom: .5rem; font-weight: 500; color: var(--bs-heading-color); font-size: 1.25rem;">
                        {{ $setting->company_name }}</h5>
                    <p style="box-sizing: border-box; margin-top: 0; margin-bottom: 1rem;"> {!! $setting->company_address !!}</p>
                </div>
            </div>
        </div>
        <hr>

        <div style="display: flex">
            <div style="box-sizing: border-box; flex-shrink: 0; width: 100%; max-width: 100%; padding-right: calc(var(--bs-gutter-x) * .5); padding-left: calc(var(--bs-gutter-x) * .5); margin-top: var(--bs-gutter-y); flex: 1 0 0%;">
                <h6 class="text-500" style="box-sizing: border-box; margin-top: 0; margin-bottom: .5rem; font-weight: 500; line-height: 1.2; color: var(--bs-heading-color); font-size: 1rem;">
                    Invoice to</h6>
                <h5 style="box-sizing: border-box; margin-top: 0; margin-bottom: .5rem; font-weight: 500; line-height: 1.2; color: var(--bs-heading-color); font-size: 1.25rem;">
                    {{ $transaction->Unit->TenantUnit->Tenant->nama_tenant }}</h5>
                <p cclass="fs--1" style="box-sizing: border-box; margin-top: 0; margin-bottom: 1rem;">
                    {{ $site->nama_site }},
                    {{ $transaction->Unit->Tower->nama_tower }}
                    {{ $transaction->Unit->nama_unit }}<br />
                    {{ $site->provinsi }}, {{ $site->kode_pos }}
                </p>
                <p class="fs--1" style="box-sizing: border-box; margin-top: 0; margin-bottom: 1rem;">
                    <a href="mailto:{{ $transaction->Unit->TenantUnit->Tenant->email_tenant }}" style="box-sizing: border-box; color: rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 1)); text-decoration: underline;">
                        {{ $transaction->Unit->TenantUnit->Tenant->email_tenant }}</a><br />
                    <a href="tel:444466667777" style="box-sizing: border-box; color: rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 1)); text-decoration: underline;">{{ $transaction->Unit->TenantUnit->Tenant->no_telp_tenant }}</a>
                </p>
            </div>

            <div>
                <div>
                    <table width="100%" valign="top">
                        <tbody>
                            <tr>
                                <th>Invoice Date</th>
                                <td>:</td>
                                <td>
                                    {{ HumanDate($transaction->created_at) }}
                                </td>
                            </tr>
                            <tr>
                                <th>Total</th>
                                <td>:</td>
                                <td>
                                    {{ Rupiah($transaction->IPLCashReceipt->sub_total) }}
                                </td>
                            </tr>
                            <tr>
                                <th>Payment Status</th>
                                <td>:</td>
                                <td id="payment-status">
                                    @if ($transaction->IPLCashReceipt->transaction_status == 'PAID')
                                    <span style="
                                            background: green;
                                            padding: 5px 10px 5px 10px;
                                            border-radius: 10px;
                                            color: white;
                                            ">{{ $transaction->IPLCashReceipt->transaction_status }}
                                    </span>
                                    @else
                                    <span style="
                                            background: red;
                                            padding: 5px 10px 5px 10px;
                                            border-radius: 10px;
                                            color: white;
                                            ">PENDING
                                    </span>
                                    @endif
                                </td>


                            </tr>
                            @if ($transaction->IPLCashReceipt->settlement_time)
                            <tr>
                                <th>Payment Date</th>
                                <td>:</td>
                                <td id="payment-date">
                                    {{ HumanDateTime($transaction->IPLCashReceipt->settlement_time) }}
                                </td>
                            </tr>
                            @endif
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="table-responsive scrollbar mt-4 fs--1" style="box-sizing: border-box; overflow-x: auto; -webkit-overflow-scrolling: touch; margin-top: 1.5rem;">
            <table class="table" style="box-sizing: border-box; border-width: 0; caption-side: bottom; border-collapse: collapse; width: 100%; margin-bottom: 1rem; vertical-align: top; border-color: var(--bs-table-border-color);" width="100%" valign="top">
                <tbody style="box-sizing: border-box; border-color: inherit; border-style: solid; border-width: 2px; vertical-align: inherit;" valign="inherit">
                    @foreach ($transaction->IPLCashReceipt->CronPreviousIPLBill($transaction->periode_bulan, $transaction->periode_tahun, $db_name) as $bill)
                    <tr class="alert alert-success my-3">
                        <td colspan="8" style="box-sizing: border-box; border-color: inherit; border-style: solid; border-width: 2px; padding: .5rem .5rem; color: var(--bs-table-color-state, var(--bs-table-color-type, var(--bs-table-color))); background-color: var(--bs-table-bg); border-bottom-width: var(--bs-border-width); box-shadow: inset 0 0 0 9999px var(--bs-table-bg-state, var(--bs-table-bg-type, var(--bs-table-accent-bg))); vertical-align: middle;" valign="middle">
                            <h6 class="mb-0 text-nowrap" style="box-sizing: border-box; margin-top: 0; font-weight: 500; line-height: 1.2; color: white; font-size: 1rem; margin-bottom: 0; white-space: nowrap;">
                                Tagihan bulan {{ $bill->MonthlyARTenant->periode_bulan }}, {{ $bill->MonthlyARTenant->periode_tahun }}
                            </h6>
                        </td>
                        <td colspan="6"></td>
                    </tr>
                    <tr>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3">Tagihan IPL</h6>
                            <div>
                                <span>Service Charge</span>
                                <hr>
                                <span>Sink Fund</span>
                            </div>
                        </td>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3">Luas Unit</h6>
                            <div>
                                <span>{{ $bill->MonthlyARTenant->MonthlyIPL->Unit->luas_unit }} m<sup>2</sup></span>
                                <hr>
                                <span>{{ $bill->MonthlyARTenant->MonthlyIPL->Unit->luas_unit }} m<sup>2</sup></span>
                            </div>
                        </td>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3">Biaya Permeter / Biaya Procentage</h6>
                            <div>
                                <span>{{ $sc->biaya_procentage ? $sc->biaya_procentage . '%' : Rupiah($sc->biaya_permeter) }}</span>
                                <hr>
                                <span>{{ $sf->biaya_procentage ? $sf->biaya_procentage . '%' : Rupiah($sf->biaya_permeter) }}</span>
                            </div>
                        </td>
                        <td></td>
                        <td></td>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3">Total</h6>
                            <div>
                                <span>{{ Rupiah($bill->MonthlyARTenant->MonthlyIPL->ipl_service_charge) }}</span>
                                <hr>
                                <span>{{ Rupiah($bill->MonthlyARTenant->MonthlyIPL->ipl_sink_fund) }}</span>
                            </div>
                        </td>
                    </tr>

                    @endforeach
                    <tr class="alert alert-success my-3">
                        <td class="align-middle">
                            <h6 class="mb-0 text-nowrap">Tagihan bulan {{ $transaction->periode_bulan }}, {{ $transaction->periode_tahun }}</h6>
                        </td>
                        <td class="align-middle"></td>
                        <td colspan="6"></td>
                    </tr>
                    <tr>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3">Tagihan IPL</h6>
                            <div>
                                <p class="mb-0">Service Charge</p>
                                <hr>
                                <p class="mb-0">Sink Fund</p>
                            </div>
                        </td>
                        <td class="align-middle">
                            <h6 class="mb-3 mt-3 text-nowrap">Luas Unit</h6>
                            <div>
                                <span>{{ $transaction->MonthlyIPL->Unit->luas_unit }} m<sup>2</sup></span> <br>
                                <hr>
                                <span>{{ $transaction->MonthlyIPL->Unit->luas_unit }} m<sup>2</sup></span>
                            </div>
                        </td>
                        <td class="align-middle" colspan="2">
                            <h6 class="mb-3 mt-3">Biaya Permeter / Biaya Procentage</h6>
                            <div>
                                <span>{{ $sc->biaya_procentage ? $sc->biaya_procentage . '%' : Rupiah($sc->biaya_permeter) }}</span>
                                <br>
                                <hr>
                                <span>{{ $sf->biaya_procentage ? $sf->biaya_procentage . '%' : Rupiah($sf->biaya_permeter) }}</span>
                            </div>
                        </td>
                        <td></td>
                        <td></td>
                        <td class="align-middle text-end" colspan="2">
                            <h6 class="mb-3 mt-3">Total</h6>
                            <div>
                                <span>{{ Rupiah($transaction->MonthlyIPL->ipl_service_charge) }}</span> <br>
                                <hr>
                                <span>{{ Rupiah($transaction->MonthlyIPL->ipl_sink_fund) }}</span>
                            </div>
                        </td>
                    </tr>

                    @if ($transaction->IPLCashReceipt->denda_bulan_sebelumnya)
                    <tr class="alert alert-danger my-3">
                        <td class="align-middle">
                            <h6 class="mb-0 text-nowrap">Denda Bulan Sebelumnya
                            </h6>
                        </td>
                        <td class="align-middle">
                        </td>
                        <td colspan="6"></td>
                    </tr>
                    @foreach ($transaction->IPLCashReceipt->CronPreviousIPLBill($transaction->periode_bulan, $transaction->periode_tahun, $db_name) as $bill)
                    <tr>
                        <td class="align-middle">
                            <h6 class="mb-3 text-nowrap">Periode</h6>
                            <span>Bulan {{ $bill->MonthlyARTenant->periode_bulan }} /
                                {{ $bill->MonthlyARTenant->periode_tahun }}</span>
                        </td>
                        <td class="align-middle text-end" colspan="6">
                            <h6 class="text-nowrap mb-3 text-end">Total</h6>
                            <span>{{ DecimalRupiahRP($bill->total_denda) }}</span>
                        </td>
                    </tr>
                    @endforeach
                    @endif
                    @if ($transaction->IPLCashReceipt->CronInstallment($db_name))
                    @php
                    $installment = $transaction->IPLCashReceipt->Installment();
                    @endphp
                    <td class="align-middle">
                        <h6 class="mb-3 text-nowrap">Installment</h6>
                        <p class="mb-0">{{ $installment->no_invoice }} ({{ $installment->rev }})</p>
                    </td>
                    <td class="align-middle text-end" colspan="6">
                        <h6 class="text-nowrap mb-3 text-end">Total</h6>
                        <span>{{ DecimalRupiahRP($installment->amount) }}</span>
                    </td>
                    @endif
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>